{"ast":null,"code":"import _extends from \"/Users/cihanandac/Documents/code-files/utrechtsciencepark/utrecht-science-park/frontend/node_modules/babel-preset-razzle/node_modules/@babel/runtime/helpers/esm/extends.js\";\nvar _jsxFileName = \"/Users/cihanandac/Documents/code-files/utrechtsciencepark/utrecht-science-park/frontend/src/customizations/components/manage/Blocks/Video/Body.jsx\";\nvar __jsx = React.createElement;\n// fixes https://github.com/plone/volto/issues/4659\n\n/**\n * Body video block.\n * @module components/manage/Blocks/Video/Body\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport { Embed, Message } from 'semantic-ui-react';\nimport cx from 'classnames';\nimport { isInternalURL, flattenToAppURL } from '@plone/volto/helpers';\n\n/**\n * Body video block class.\n * @class Body\n * @extends Component\n */\nconst Body = _ref => {\n  let {\n    data,\n    isEditMode\n  } = _ref;\n  let placeholder = data.preview_image ? isInternalURL(data.preview_image) ? `${flattenToAppURL(data.preview_image)}/@@images/image` : data.preview_image : null;\n  let videoID = null;\n  let listID = null;\n  if (data.url) {\n    if (data.url.match('youtu')) {\n      if (data.url.match('list')) {\n        const matches = data.url.match(/^.*\\?list=(.*)|^.*&list=(.*)$/);\n        listID = matches[1] || matches[2];\n      } else {\n        videoID = data.url.match(/.be\\//) ? data.url.match(/^.*\\.be\\/(.*)/)[1] : data.url.match(/^.*\\?v=(.*)$/)[1];\n      }\n      if (!placeholder) {\n        //load video preview image from youtube\n        placeholder = 'https://img.youtube.com/vi/' + videoID + '/sddefault.jpg';\n      }\n    } else if (data.url.match('vimeo')) {\n      videoID = data.url.match(/^.*\\.com\\/(.*)/)[1];\n      if (!placeholder) {\n        placeholder = 'https://vumbnail.com/' + videoID + '.jpg';\n      }\n    }\n  }\n  const ref = /*#__PURE__*/React.createRef();\n  const onKeyDown = e => {\n    if (e.nativeEvent.keyCode === 13) {\n      ref.current.handleClick();\n    }\n  };\n  const embedSettings = {\n    placeholder: placeholder,\n    icon: 'play',\n    defaultActive: true,\n    autoplay: false,\n    aspectRatio: '16:9',\n    tabIndex: 0,\n    onKeyPress: onKeyDown,\n    ref: ref\n  };\n  return __jsx(React.Fragment, null, data.url && __jsx(\"div\", {\n    className: cx('video-inner', {\n      'full-width': data.align === 'full'\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, data.url.match('youtu') ? __jsx(React.Fragment, null, data.url.match('list') ? __jsx(Embed, _extends({\n    url: `https://www.youtube.com/embed/videoseries?list=${listID}`\n  }, embedSettings, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  })) : __jsx(Embed, _extends({\n    id: videoID,\n    source: \"youtube\"\n  }, embedSettings, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }))) : __jsx(React.Fragment, null, data.url.match('vimeo') ? __jsx(Embed, _extends({\n    id: videoID,\n    source: \"vimeo\"\n  }, embedSettings, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  })) : __jsx(React.Fragment, null, data.url.match('.mp4') ?\n  // eslint-disable-next-line jsx-a11y/media-has-caption\n  __jsx(\"video\", {\n    src: isInternalURL(data.url) ? data.url.includes('@@download') ? data.url : `${flattenToAppURL(data.url)}/@@download/file` : data.url,\n    controls: true,\n    poster: placeholder,\n    type: \"video/mp4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }) : isEditMode ? __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, __jsx(Message, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 23\n    }\n  }, __jsx(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }, __jsx(FormattedMessage, {\n    id: \"Please enter a valid URL by deleting the block and adding a new video block.\",\n    defaultMessage: \"Please enter a valid URL by deleting the block and adding a new video block.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 27\n    }\n  })))) : __jsx(\"div\", {\n    className: \"invalidVideoFormat\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  })))));\n};\n\n/**\n * Property types.\n * @property {Object} propTypes Property types.\n * @static\n */\n_c = Body;\nBody.propTypes = {\n  data: PropTypes.objectOf(PropTypes.any).isRequired\n};\nexport default Body;\nvar _c;\n$RefreshReg$(_c, \"Body\");","map":{"version":3,"names":["React","PropTypes","FormattedMessage","Embed","Message","cx","isInternalURL","flattenToAppURL","Body","data","isEditMode","placeholder","preview_image","videoID","listID","url","match","matches","ref","createRef","onKeyDown","e","nativeEvent","keyCode","current","handleClick","embedSettings","icon","defaultActive","autoplay","aspectRatio","tabIndex","onKeyPress","align","includes","propTypes","objectOf","any","isRequired"],"sources":["/Users/cihanandac/Documents/code-files/utrechtsciencepark/utrecht-science-park/frontend/src/customizations/components/manage/Blocks/Video/Body.jsx"],"sourcesContent":["// fixes https://github.com/plone/volto/issues/4659\n\n/**\n * Body video block.\n * @module components/manage/Blocks/Video/Body\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\nimport { Embed, Message } from 'semantic-ui-react';\nimport cx from 'classnames';\nimport { isInternalURL, flattenToAppURL } from '@plone/volto/helpers';\n\n/**\n * Body video block class.\n * @class Body\n * @extends Component\n */\nconst Body = ({ data, isEditMode }) => {\n  let placeholder = data.preview_image\n    ? isInternalURL(data.preview_image)\n      ? `${flattenToAppURL(data.preview_image)}/@@images/image`\n      : data.preview_image\n    : null;\n\n  let videoID = null;\n  let listID = null;\n\n  if (data.url) {\n    if (data.url.match('youtu')) {\n      if (data.url.match('list')) {\n        const matches = data.url.match(/^.*\\?list=(.*)|^.*&list=(.*)$/);\n        listID = matches[1] || matches[2];\n      } else {\n        videoID = data.url.match(/.be\\//)\n          ? data.url.match(/^.*\\.be\\/(.*)/)[1]\n          : data.url.match(/^.*\\?v=(.*)$/)[1];\n      }\n\n      if (!placeholder) {\n        //load video preview image from youtube\n        placeholder =\n          'https://img.youtube.com/vi/' + videoID + '/sddefault.jpg';\n      }\n    } else if (data.url.match('vimeo')) {\n      videoID = data.url.match(/^.*\\.com\\/(.*)/)[1];\n      if (!placeholder) {\n        placeholder = 'https://vumbnail.com/' + videoID + '.jpg';\n      }\n    }\n  }\n\n  const ref = React.createRef();\n  const onKeyDown = (e) => {\n    if (e.nativeEvent.keyCode === 13) {\n      ref.current.handleClick();\n    }\n  };\n\n  const embedSettings = {\n    placeholder: placeholder,\n    icon: 'play',\n    defaultActive: true,\n    autoplay: false,\n    aspectRatio: '16:9',\n    tabIndex: 0,\n    onKeyPress: onKeyDown,\n    ref: ref,\n  };\n\n  return (\n    <>\n      {data.url && (\n        <div\n          className={cx('video-inner', {\n            'full-width': data.align === 'full',\n          })}\n        >\n          {data.url.match('youtu') ? (\n            <>\n              {data.url.match('list') ? (\n                <Embed\n                  url={`https://www.youtube.com/embed/videoseries?list=${listID}`}\n                  {...embedSettings}\n                />\n              ) : (\n                <Embed id={videoID} source=\"youtube\" {...embedSettings} />\n              )}\n            </>\n          ) : (\n            <>\n              {data.url.match('vimeo') ? (\n                <Embed id={videoID} source=\"vimeo\" {...embedSettings} />\n              ) : (\n                <>\n                  {data.url.match('.mp4') ? (\n                    // eslint-disable-next-line jsx-a11y/media-has-caption\n                    <video\n                      src={\n                        isInternalURL(data.url)\n                          ? data.url.includes('@@download')\n                            ? data.url\n                            : `${flattenToAppURL(data.url)}/@@download/file`\n                          : data.url\n                      }\n                      controls\n                      poster={placeholder}\n                      type=\"video/mp4\"\n                    />\n                  ) : isEditMode ? (\n                    <div>\n                      <Message>\n                        <center>\n                          <FormattedMessage\n                            id=\"Please enter a valid URL by deleting the block and adding a new video block.\"\n                            defaultMessage=\"Please enter a valid URL by deleting the block and adding a new video block.\"\n                          />\n                        </center>\n                      </Message>\n                    </div>\n                  ) : (\n                    <div className=\"invalidVideoFormat\" />\n                  )}\n                </>\n              )}\n            </>\n          )}\n        </div>\n      )}\n    </>\n  );\n};\n\n/**\n * Property types.\n * @property {Object} propTypes Property types.\n * @static\n */\nBody.propTypes = {\n  data: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n\nexport default Body;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Please enter a valid URL by deleting the block and adding a new video block.","defaultMessage":"Please enter a valid URL by deleting the block and adding a new video block."}]}},"sourceType":"module","externalDependencies":[]}