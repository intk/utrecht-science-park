{"ast":null,"code":"import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { flattenToAppURL } from '@plone/volto/helpers';\nimport { getContent } from '@plone/volto/actions';\nconst parent = path => {\n  if (!path) return;\n  const bits = path.split('/');\n  if (bits.length < 2) return;\n  const parentBits = bits.slice(0, bits.length - 1);\n  return parentBits.join('/');\n};\nconst usePreviewImage = pathname => {\n  var _subrequest$data;\n  const dispatch = useDispatch();\n  const contentData = useSelector(state => state.content.data);\n  const contentId = flattenToAppURL((contentData === null || contentData === void 0 ? void 0 : contentData['@id']) || '');\n  const subrequestId = `${contentId}-preview_image_request}`;\n  const subrequest = useSelector(state => {\n    var _state$content$subreq;\n    return (_state$content$subreq = state.content.subrequests) === null || _state$content$subreq === void 0 ? void 0 : _state$content$subreq[subrequestId];\n  });\n  const preview_image = (contentData === null || contentData === void 0 ? void 0 : contentData.preview_image) || (subrequest === null || subrequest === void 0 ? void 0 : (_subrequest$data = subrequest.data) === null || _subrequest$data === void 0 ? void 0 : _subrequest$data.preview_image);\n  const parentPath = parent(subrequest !== null && subrequest !== void 0 && subrequest.data ? flattenToAppURL(subrequest.data['@id']) : flattenToAppURL(contentData === null || contentData === void 0 ? void 0 : contentData['@id']));\n  React.useEffect(() => {\n    if (!preview_image && parentPath) {\n      dispatch(getContent(parentPath, null, subrequestId));\n    }\n  }, [preview_image, parentPath, dispatch, subrequestId]);\n  return preview_image;\n};\nexport default usePreviewImage;","map":{"version":3,"names":["React","useSelector","useDispatch","flattenToAppURL","getContent","parent","path","bits","split","length","parentBits","slice","join","usePreviewImage","pathname","dispatch","contentData","state","content","data","contentId","subrequestId","subrequest","subrequests","preview_image","parentPath","useEffect"],"sources":["/Users/cihanandac/Documents/code-files/utrechtsciencepark/utrecht-science-park/frontend/src/customizations/components/theme/Header/usePreviewImage.js"],"sourcesContent":["import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { flattenToAppURL } from '@plone/volto/helpers';\nimport { getContent } from '@plone/volto/actions';\n\nconst parent = (path) => {\n  if (!path) return;\n\n  const bits = path.split('/');\n  if (bits.length < 2) return;\n\n  const parentBits = bits.slice(0, bits.length - 1);\n  return parentBits.join('/');\n};\n\nconst usePreviewImage = (pathname) => {\n  const dispatch = useDispatch();\n  const contentData = useSelector((state) => state.content.data);\n  const contentId = flattenToAppURL(contentData?.['@id'] || '');\n  const subrequestId = `${contentId}-preview_image_request}`;\n  const subrequest = useSelector(\n    (state) => state.content.subrequests?.[subrequestId],\n  );\n  const preview_image =\n    contentData?.preview_image || subrequest?.data?.preview_image;\n\n  const parentPath = parent(\n    subrequest?.data\n      ? flattenToAppURL(subrequest.data['@id'])\n      : flattenToAppURL(contentData?.['@id']),\n  );\n\n  React.useEffect(() => {\n    if (!preview_image && parentPath) {\n      dispatch(getContent(parentPath, null, subrequestId));\n    }\n  }, [preview_image, parentPath, dispatch, subrequestId]);\n\n  return preview_image;\n};\n\nexport default usePreviewImage;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,eAAe,QAAQ,sBAAsB;AACtD,SAASC,UAAU,QAAQ,sBAAsB;AAEjD,MAAMC,MAAM,GAAIC,IAAI,IAAK;EACvB,IAAI,CAACA,IAAI,EAAE;EAEX,MAAMC,IAAI,GAAGD,IAAI,CAACE,KAAK,CAAC,GAAG,CAAC;EAC5B,IAAID,IAAI,CAACE,MAAM,GAAG,CAAC,EAAE;EAErB,MAAMC,UAAU,GAAGH,IAAI,CAACI,KAAK,CAAC,CAAC,EAAEJ,IAAI,CAACE,MAAM,GAAG,CAAC,CAAC;EACjD,OAAOC,UAAU,CAACE,IAAI,CAAC,GAAG,CAAC;AAC7B,CAAC;AAED,MAAMC,eAAe,GAAIC,QAAQ,IAAK;EAAA;EACpC,MAAMC,QAAQ,GAAGb,WAAW,EAAE;EAC9B,MAAMc,WAAW,GAAGf,WAAW,CAAEgB,KAAK,IAAKA,KAAK,CAACC,OAAO,CAACC,IAAI,CAAC;EAC9D,MAAMC,SAAS,GAAGjB,eAAe,CAAC,CAAAa,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAG,KAAK,CAAC,KAAI,EAAE,CAAC;EAC7D,MAAMK,YAAY,GAAI,GAAED,SAAU,yBAAwB;EAC1D,MAAME,UAAU,GAAGrB,WAAW,CAC3BgB,KAAK;IAAA;IAAA,gCAAKA,KAAK,CAACC,OAAO,CAACK,WAAW,0DAAzB,sBAA4BF,YAAY,CAAC;EAAA,EACrD;EACD,MAAMG,aAAa,GACjB,CAAAR,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEQ,aAAa,MAAIF,UAAU,aAAVA,UAAU,2CAAVA,UAAU,CAAEH,IAAI,qDAAhB,iBAAkBK,aAAa;EAE/D,MAAMC,UAAU,GAAGpB,MAAM,CACvBiB,UAAU,aAAVA,UAAU,eAAVA,UAAU,CAAEH,IAAI,GACZhB,eAAe,CAACmB,UAAU,CAACH,IAAI,CAAC,KAAK,CAAC,CAAC,GACvChB,eAAe,CAACa,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAG,KAAK,CAAC,CAAC,CAC1C;EAEDhB,KAAK,CAAC0B,SAAS,CAAC,MAAM;IACpB,IAAI,CAACF,aAAa,IAAIC,UAAU,EAAE;MAChCV,QAAQ,CAACX,UAAU,CAACqB,UAAU,EAAE,IAAI,EAAEJ,YAAY,CAAC,CAAC;IACtD;EACF,CAAC,EAAE,CAACG,aAAa,EAAEC,UAAU,EAAEV,QAAQ,EAAEM,YAAY,CAAC,CAAC;EAEvD,OAAOG,aAAa;AACtB,CAAC;AAED,eAAeX,eAAe"},"metadata":{"react-intl":{"messages":[]}},"sourceType":"module","externalDependencies":[]}