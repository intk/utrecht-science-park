{"ast":null,"code":"import _isEqual from \"lodash/isEqual\";\nvar _jsxFileName = \"/Users/cihanandac/Documents/code-files/utrechtsciencepark/utrecht-science-park/frontend/node_modules/volto-subblocks/src/SubblocksEdit.jsx\";\nvar __jsx = React.createElement;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport move from 'lodash-move';\nimport { defineMessages } from 'react-intl';\nimport { Button } from 'semantic-ui-react';\nimport './volto-subblocks.css';\nconst messages = defineMessages({\n  addBlock: {\n    \"id\": \"Add block\",\n    \"defaultMessage\": \"Add block\"\n  }\n});\nclass SubblocksEdit extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"state\", {\n      subblocks: [],\n      subIndexSelected: 0\n    });\n    _defineProperty(this, \"onChangeSubblocks\", (subblockIndex, subblock) => {\n      if (!_isEqual(subblock, this.state.subblocks[subblockIndex])) {\n        var subblocks = this.state.subblocks;\n        subblocks[subblockIndex] = subblock;\n        this.props.onChangeBlock(this.props.block, _objectSpread(_objectSpread({}, this.props.data), {}, {\n          subblocks: subblocks,\n          lastChange: new Date().getTime()\n        }));\n        this.setState({\n          subblocks\n        });\n      }\n    });\n    _defineProperty(this, \"onMoveSubblock\", (dragIndex, hoverIndex) => {\n      const subblocks = move(this.props.data.subblocks, dragIndex, hoverIndex);\n      this.props.onChangeBlock(this.props.block, _objectSpread(_objectSpread({}, this.props.data), {}, {\n        subblocks: subblocks\n      }));\n      this.setState({\n        subblocks\n      });\n    });\n    _defineProperty(this, \"addSubblock\", () => {\n      var s = this.state.subblocks;\n      var id = new Date().getTime().toString();\n      var newBlock = {\n        id: id\n      };\n      s.push({});\n      this.setState({\n        subblocks: s\n      });\n      var index = this.state.subblocks.length - 1;\n      this.onChangeSubblocks(index, newBlock);\n      this.onSubblockChangeFocus(index);\n    });\n    _defineProperty(this, \"onSubblockChangeFocus\", index => {\n      this.setState({\n        subIndexSelected: index\n      });\n    });\n    _defineProperty(this, \"deleteSubblock\", index => {\n      var sbb = this.state.subblocks;\n      var subblocks = [...sbb.slice(0, index), ...sbb.slice(index + 1)];\n      this.setState({\n        subblocks\n      });\n      this.props.onChangeBlock(this.props.block, _objectSpread(_objectSpread({}, this.props.data), {}, {\n        subblocks: subblocks\n      }));\n    });\n    _defineProperty(this, \"renderAddBlockButton\", title => {\n      return this.props.selected && __jsx(Button, {\n        onClick: this.addSubblock,\n        className: \"add-element\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 9\n        }\n      }, title ? title : this.props.intl.formatMessage(messages.addBlock));\n    });\n    _defineProperty(this, \"isSubblockSelected\", subindex => {\n      return this.props.selected && this.state.subIndexSelected === subindex;\n    });\n    _defineProperty(this, \"subblockProps\", {\n      block: this.props.block,\n      onSubblockChangeFocus: this.onSubblockChangeFocus,\n      onChangeBlock: this.onChangeSubblocks,\n      onMoveSubblock: this.onMoveSubblock,\n      onDelete: this.deleteSubblock,\n      nblock: this.state.subblocks.length\n    });\n    let _subblocks = [];\n    if (!__SERVER__) {\n      if (props.data && props.data.subblocks) {\n        _subblocks = props.data.subblocks;\n      }\n    }\n    this.state = {\n      subblocks: _subblocks\n    };\n  }\n  /**\n   * Component will receive props\n   * @method componentDidMount\n   * @returns {undefined}\n   */\n  componentDidMount() {\n    if (this.props.selected && this.node) {\n      this.node.focus();\n    }\n    if (this.state.subblocks.length === 0) {\n      this.addSubblock();\n    }\n  }\n\n  /**\n   * Component will receive props\n   * @method componentWillUnmount\n   * @returns {undefined}\n   */\n  componentWillUnmount() {\n    if (this.props.selected && this.node) {\n      this.node.focus();\n    }\n  }\n\n  /**\n   * Change handler\n   * @method onChange\n   * @param {object} subblocks list.\n   * @returns {undefined}\n   */\n}\n_defineProperty(SubblocksEdit, \"propTypes\", {\n  data: PropTypes.objectOf(PropTypes.any).isRequired,\n  index: PropTypes.number.isRequired,\n  selected: PropTypes.bool.isRequired,\n  block: PropTypes.string.isRequired,\n  onAddBlock: PropTypes.func.isRequired,\n  onChangeBlock: PropTypes.func.isRequired,\n  onDeleteBlock: PropTypes.func.isRequired,\n  onMutateBlock: PropTypes.func.isRequired,\n  onFocusPreviousBlock: PropTypes.func.isRequired,\n  onFocusNextBlock: PropTypes.func.isRequired,\n  onSelectBlock: PropTypes.func.isRequired,\n  openObjectBrowser: PropTypes.func.isRequired,\n  pathname: PropTypes.string.isRequired\n});\nexport default SubblocksEdit;","map":{"version":3,"names":["React","Component","PropTypes","move","defineMessages","Button","messages","addBlock","SubblocksEdit","constructor","props","subblocks","subIndexSelected","subblockIndex","subblock","state","onChangeBlock","block","data","lastChange","Date","getTime","setState","dragIndex","hoverIndex","s","id","toString","newBlock","push","index","length","onChangeSubblocks","onSubblockChangeFocus","sbb","slice","title","selected","addSubblock","intl","formatMessage","subindex","onMoveSubblock","onDelete","deleteSubblock","nblock","__SERVER__","componentDidMount","node","focus","componentWillUnmount","objectOf","any","isRequired","number","bool","string","onAddBlock","func","onDeleteBlock","onMutateBlock","onFocusPreviousBlock","onFocusNextBlock","onSelectBlock","openObjectBrowser","pathname"],"sources":["/Users/cihanandac/Documents/code-files/utrechtsciencepark/utrecht-science-park/frontend/node_modules/volto-subblocks/src/SubblocksEdit.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport move from 'lodash-move';\nimport { isEqual } from 'lodash';\nimport { defineMessages } from 'react-intl';\nimport { Button } from 'semantic-ui-react';\n\nimport './volto-subblocks.css';\n\nconst messages = defineMessages({\n  addBlock: {\n    id: 'Add block',\n    defaultMessage: 'Add block',\n  },\n});\n\nclass SubblocksEdit extends Component {\n  /**\n   * Property types.\n   * @property {Object} propTypes Property types.\n   * @static\n   */\n  static propTypes = {\n    data: PropTypes.objectOf(PropTypes.any).isRequired,\n    index: PropTypes.number.isRequired,\n    selected: PropTypes.bool.isRequired,\n    block: PropTypes.string.isRequired,\n    onAddBlock: PropTypes.func.isRequired,\n    onChangeBlock: PropTypes.func.isRequired,\n    onDeleteBlock: PropTypes.func.isRequired,\n    onMutateBlock: PropTypes.func.isRequired,\n    onFocusPreviousBlock: PropTypes.func.isRequired,\n    onFocusNextBlock: PropTypes.func.isRequired,\n    onSelectBlock: PropTypes.func.isRequired,\n    openObjectBrowser: PropTypes.func.isRequired,\n    pathname: PropTypes.string.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    let subblocks = [];\n\n    if (!__SERVER__) {\n      if (props.data && props.data.subblocks) {\n        subblocks = props.data.subblocks;\n      }\n    }\n\n    this.state = { subblocks };\n  }\n\n  state = {\n    subblocks: [],\n    subIndexSelected: 0,\n  };\n\n  /**\n   * Component will receive props\n   * @method componentDidMount\n   * @returns {undefined}\n   */\n  componentDidMount() {\n    if (this.props.selected && this.node) {\n      this.node.focus();\n    }\n    if (this.state.subblocks.length === 0) {\n      this.addSubblock();\n    }\n  }\n\n  /**\n   * Component will receive props\n   * @method componentWillUnmount\n   * @returns {undefined}\n   */\n  componentWillUnmount() {\n    if (this.props.selected && this.node) {\n      this.node.focus();\n    }\n  }\n\n  /**\n   * Change handler\n   * @method onChange\n   * @param {object} subblocks list.\n   * @returns {undefined}\n   */\n  onChangeSubblocks = (subblockIndex, subblock) => {\n    if (!isEqual(subblock, this.state.subblocks[subblockIndex])) {\n      var subblocks = this.state.subblocks;\n\n      subblocks[subblockIndex] = subblock;\n\n      this.props.onChangeBlock(this.props.block, {\n        ...this.props.data,\n        subblocks: subblocks,\n        lastChange: new Date().getTime(),\n      });\n\n      this.setState({ subblocks });\n    }\n  };\n\n  /**\n   * Move block handler\n   * @method onMoveBlock\n   * @param {number} dragIndex Drag index.\n   * @param {number} hoverIndex Hover index.\n   * @returns {undefined}\n   */\n  onMoveSubblock = (dragIndex, hoverIndex) => {\n    const subblocks = move(this.props.data.subblocks, dragIndex, hoverIndex);\n\n    this.props.onChangeBlock(this.props.block, {\n      ...this.props.data,\n      subblocks: subblocks,\n    });\n\n    this.setState({ subblocks });\n  };\n\n  addSubblock = () => {\n    var s = this.state.subblocks;\n    var id = new Date().getTime().toString();\n    var newBlock = { id: id };\n    s.push({});\n    this.setState({\n      subblocks: s,\n    });\n    var index = this.state.subblocks.length - 1;\n    this.onChangeSubblocks(index, newBlock);\n    this.onSubblockChangeFocus(index);\n  };\n\n  onSubblockChangeFocus = (index) => {\n    this.setState({ subIndexSelected: index });\n  };\n\n  deleteSubblock = (index) => {\n    var sbb = this.state.subblocks;\n    var subblocks = [...sbb.slice(0, index), ...sbb.slice(index + 1)];\n    this.setState({ subblocks });\n    this.props.onChangeBlock(this.props.block, {\n      ...this.props.data,\n      subblocks: subblocks,\n    });\n  };\n\n  renderAddBlockButton = (title) => {\n    return (\n      this.props.selected && (\n        <Button onClick={this.addSubblock} className=\"add-element\">\n          {title ? title : this.props.intl.formatMessage(messages.addBlock)}\n        </Button>\n      )\n    );\n  };\n\n  isSubblockSelected = (subindex) => {\n    return this.props.selected && this.state.subIndexSelected === subindex;\n  };\n\n  subblockProps = {\n    block: this.props.block,\n    onSubblockChangeFocus: this.onSubblockChangeFocus,\n    onChangeBlock: this.onChangeSubblocks,\n    onMoveSubblock: this.onMoveSubblock,\n    onDelete: this.deleteSubblock,\n    nblock: this.state.subblocks.length,\n  };\n}\n\nexport default SubblocksEdit;\n"],"mappings":"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"},"metadata":{"react-intl":{"messages":[{"id":"Add block","defaultMessage":"Add block"}]}},"sourceType":"module","externalDependencies":[]}